<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="../js/data.js"></script>
</head>

<body>
    <script>
        var canvas = document.createElement('canvas');
        canvas.width = 500;
        canvas.height = 500;
        canvas.style.border = '1px solid #ccc';
        document.body.appendChild(canvas);
        var ctx = canvas.getContext('2d');

        //画大圆
        ctx.save();
        ctx.beginPath();
        ctx.fillStyle = 'yellow';
        var deg = Math.PI / 180 * 360;
        ctx.arc(250, 250, 140, 0, deg);
        ctx.moveTo(250, 250);
        ctx.fill();
        ctx.restore();


        //画眼睛
        ctx.save();
        ctx.beginPath();
        ctx.fillStyle = 'white';
        var deg = Math.PI / 180 * 360;
        ctx.arc(300, 190, 13, 0, deg);
        ctx.moveTo(250, 250);
        ctx.fill();
        ctx.restore();

        //画眼球
        ctx.save();
        ctx.beginPath();
        ctx.translate(4, 4);
        ctx.fillStyle = 'black';
        var deg = Math.PI / 180 * 360;
        ctx.arc(300, 190, 6, 0, deg);
        ctx.moveTo(250, 250);
        ctx.fill();
        ctx.restore();

        //画线
        ctx.save();
        ctx.beginPath();
        ctx.strokeStyle = 'gray';
        ctx.translate(50, 60);
        ctx.lineWidth = '4';
        ctx.lineCap = 'butt';
        for (var i = 170; i <= 230; i += 10) {
            ctx.moveTo(i, 55);
            ctx.lineTo(i, 85);
        }
        ctx.stroke();
        ctx.restore();

        //画嘴巴
        ctx.save();
        ctx.beginPath();
        ctx.fillStyle = 'white';
        ctx.moveTo(250, 250);
        ctx.arc(250, 250, 150, 0, -(Math.PI / 180 * 12), true);
        ctx.fill();
        ctx.restore();

        //网格

        for (var i = 50; i < 500; i += 50) {
            ctx.beginPath();
            ctx.moveTo(0, i);
            ctx.lineTo(500, i);
            ctx.moveTo(i, 0);
            ctx.lineTo(i, 500);
            ctx.stroke();
        }






    </script>

    <script>
        canvas = document.createElement('canvas');
        canvas.width = 500;
        canvas.height = 500;
        canvas.style.border = '1px solid #ccc';
        document.body.appendChild(canvas);
        var ctx = canvas.getContext('2d');
        var deg = Math.PI / 180;
        
        var numArr = [];
        var colorArr = [];
        var person = [];
        var startDeg = -90;
        var endDeg = null;

        for (var i = 0; i < data.length; i++) {
            numArr.push(data[i].value);
        }
        var sum = numArr.reduce(function (prev, cur) {
            return prev + cur;
        });

        for (var i = 0; i < data.length; i++) {
            person.push(data[i].value / sum * 360);
            endDeg =  person[i];
            colorArr.push(data[i].color);
            ctx.fillStyle = colorArr[i];
            ctx.beginPath();
            ctx.moveTo(200, 200);
            ctx.arc(200, 200, 150, startDeg * deg, (endDeg + startDeg) * deg);
            ctx.closePath();
            startDeg += endDeg;
            ctx.fill();
        }

        ctx.save();
        ctx.beginPath();
        ctx.fillStyle = 'white';
        ctx.arc(200, 200, 100, 0, deg * 360);
        ctx.fill();
        ctx.restore();
    </script>


</body>

</html>

</body>

</html>